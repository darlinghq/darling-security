project(libsecurityd_ios)

include_directories(
	ckks
	securityd/SecDbBackupManager-protobufs/generated_source
	securityd/SecDbKeychainV7-protobufs/generated_source
	../OSX/sec/SharedWebCredential
	SecureObjectSync
	../OSX/sec/Security
	../SecurityTool/sharedTool
	CoreDataKeychain
	securityd
	../OSX/sec/ipc
)

add_lib_ios_shim(libsecurityd_ios
	OUTPUT_NAME "securityd_ios"
	OBJC_ARC
	MODERN_OBJC
	SOURCES
		#../OSX/sec/Security/SecBackupKeybagEntry.m
		#../OSX/sec/Security/SecuritydXPC.c
		#../OSX/sec/SharedWebCredential/swcagent_client.c
		#analytics/C2Metric/SECC2MPCloudKitInfo.m
		#analytics/C2Metric/SECC2MPCloudKitOperationGroupInfo.m
		#analytics/C2Metric/SECC2MPCloudKitOperationInfo.m
		#analytics/C2Metric/SECC2MPDeviceInfo.m
		#analytics/C2Metric/SECC2MPError.m
		#analytics/C2Metric/SECC2MPGenericEvent.m
		#analytics/C2Metric/SECC2MPGenericEventMetric.m
		#analytics/C2Metric/SECC2MPGenericEventMetricValue.m
		#analytics/C2Metric/SECC2MPInternalTestConfig.m
		#analytics/C2Metric/SECC2MPMetric.m
		#analytics/C2Metric/SECC2MPNetworkEvent.m
		#analytics/C2Metric/SECC2MPServerInfo.m
		#analytics/CKKSLaunchSequence.m
		#analytics/CKKSPowerCollection.m
		#analytics/SecC2DeviceInfo.m
		#analytics/SecEventMetric.m
		#analytics/SecMetrics.m
		#categories/NSError+UsefulConstructors.m
		#ckks/CKKS.m
		#ckks/CKKSAccountStateTracker.m
		#ckks/CKKSAnalytics.m
		#ckks/CKKSCloudKitClassDependencies.m
		#ckks/CKKSCondition.m
		#ckks/CKKSConstants.m
		#ckks/CKKSControlServer.m
		#ckks/CKKSCurrentItemPointer.m
		#ckks/CKKSCurrentKeyPointer.m
		#ckks/CKKSDeviceStateEntry.m
		#ckks/CKKSFetchAllRecordZoneChangesOperation.m
		#ckks/CKKSFixups.m
		#ckks/CKKSGroupOperation.m
		#ckks/CKKSHealKeyHierarchyOperation.m
		#ckks/CKKSHealTLKSharesOperation.m
		#ckks/CKKSIncomingQueueEntry.m
		#ckks/CKKSIncomingQueueOperation.m
		#ckks/CKKSItem.m
		#ckks/CKKSItemEncrypter.m
		#ckks/CKKSKey.m
		#ckks/CKKSKeychainBackedKey.m
		#ckks/CKKSKeychainView.m
		#ckks/CKKSListenerCollection.m
		#ckks/CKKSLocalSynchronizeOperation.m
		#ckks/CKKSLockStateTracker.m
		#ckks/CKKSManifest.m
		#ckks/CKKSManifestLeafRecord.m
		#ckks/CKKSMirrorEntry.m
		#ckks/CKKSNearFutureScheduler.m
		#ckks/CKKSNewTLKOperation.m
		#ckks/CKKSNotifier.m
		#ckks/CKKSOutgoingQueueEntry.m
		#ckks/CKKSOutgoingQueueOperation.m
		#ckks/CKKSPBFileStorage.m
		#ckks/CKKSPeer.m
		#ckks/CKKSPeerProvider.m
		#ckks/CKKSProcessReceivedKeysOperation.m
		#ckks/CKKSProvideKeySetOperation.m
		#ckks/CKKSRateLimiter.m
		#ckks/CKKSReachabilityTracker.m
		#ckks/CKKSRecordHolder.m
		#ckks/CKKSReencryptOutgoingItemsOperation.m
		#ckks/CKKSResultOperation.m
		#ckks/CKKSScanLocalItemsOperation.m
		#ckks/CKKSSIV.m
		#ckks/CKKSSQLDatabaseObject.m
		#ckks/CKKSSynchronizeOperation.m
		#ckks/CKKSTLKShare.m
		#ckks/CKKSTLKShareRecord.m
		#ckks/CKKSUpdateCurrentItemPointerOperation.m
		#ckks/CKKSUpdateDeviceStateOperation.m
		#ckks/CKKSViewManager.m
		#ckks/CKKSZone.m
		#ckks/CKKSZoneChangeFetcher.m
		#ckks/CKKSZoneModifier.m
		#ckks/CKKSZoneStateEntry.m
		#ckks/CloudKitCategories.m
		#ckks/NSOperationCategories.m
		#ckks/OctagonAPSReceiver.m
		#ckks/proto/generated_source/CKKSSerializedKey.m
		#ckks/RateLimiter.m
		#CoreDataKeychain/KeychainModel.xcdatamodeld
		#CoreDataKeychain/SecCDKeychain.m
		#escrowrequest/EscrowRequestController.m
		#escrowrequest/EscrowRequestServer.m
		#escrowrequest/EscrowRequestServerHelpers.m
		#escrowrequest/EscrowRequestXPCServer.m
		#escrowrequest/generated_source/SecEscrowPendingRecord.m
		#escrowrequest/operations/EscrowRequestInformCloudServicesOperation.m
		#escrowrequest/operations/EscrowRequestPerformEscrowEnrollOperation.m
		#escrowrequest/SecEscrowPendingRecord+KeychainSupport.m
		#ot/categories/OTAccountMetadataClassC+KeychainSupport.m
		#ot/CuttlefishXPCWrapper.h
		#ot/CuttlefishXPCWrapper.m
		#ot/OctagonCheckTrustStateOperation.m
		#ot/OctagonCKKSPeerAdapter.m
		#ot/OctagonControlServer.m
		#ot/OctagonFlags.m
		#ot/OctagonPendingFlag.m
		#ot/OctagonStateMachine.m
		#ot/OctagonStateMachineHelpers.m
		#ot/OctagonStateMachineObservers.m
		#ot/OT.m
		#ot/OTAuthKitAdapter.m
		#ot/OTCheckHealthOperation.m
		#ot/OTClientStateMachine.m
		#ot/OTClientVoucherOperation.m
		#ot/OTConstants.m
		#ot/OTControlProtocol.m
		#ot/OTCuttlefishAccountStateHolder.m
		#ot/OTCuttlefishContext.m
		#ot/OTDefines.m
		#ot/OTDetermineHSA2AccountStatusOperation.m
		#ot/OTDeviceInformation.m
		#ot/OTDeviceInformationAdapter.m
		#ot/OTEnsureOctagonKeyConsistency.m
		#ot/OTEpochOperation.m
		#ot/OTEstablishOperation.m
		#ot/OTFetchCKKSKeysOperation.m
		#ot/OTFetchViewsOperation.m
		#ot/OTFollowup.m
		#ot/OTJoinWithVoucherOperation.m
		#ot/OTLeaveCliqueOperation.m
		#ot/OTLocalCKKSResetOperation.m
		#ot/OTLocalCuttlefishReset.m
		#ot/OTManager.m
		#ot/OTOperationDependencies.m
		#ot/OTPrepareOperation.m
		#ot/OTRamping.m
		#ot/OTRemovePeersOperation.m
		#ot/OTResetCKKSZonesLackingTLKsOperation.m
		#ot/OTResetOperation.m
		#ot/OTSetRecoveryKeyOperation.m
		#ot/OTSOSAdapter.m
		#ot/OTSOSUpdatePreapprovalsOperation.m
		#ot/OTSOSUpgradeOperation.m
		#ot/OTStates.m
		#ot/OTTriggerEscrowUpdateOperation.m
		#ot/OTUpdateTPHOperation.m
		#ot/OTUpdateTrustedDeviceListOperation.m
		#ot/OTUploadNewCKKSTLKsOperation.m
		#ot/OTVouchWithBottleOperation.m
		#ot/OTVouchWithRecoveryKeyOperation.m
		#ot/proto/generated_source/OTAccountMetadataClassC.m
		#otpaird/OTPairingClient.m
		SecureObjectSync/SOSChangeTracker.c
		SecureObjectSync/SOSEngine.c
		SecureObjectSync/SOSEnsureBackup.m
		securityd/CheckV12DevEnabled.m
		securityd/iCloudTrace.c
		securityd/SecAKSObjCWrappers.m
		securityd/SecDbBackupManager-protobufs/generated_source/SecDbBackupBag.m
		securityd/SecDbBackupManager-protobufs/generated_source/SecDbBackupBagIdentity.m
		securityd/SecDbBackupManager-protobufs/generated_source/SecDbBackupKeyClassSigningKey.m
		securityd/SecDbBackupManager-protobufs/generated_source/SecDbBackupMetadataClassKey.m
		securityd/SecDbBackupManager-protobufs/generated_source/SecDbBackupRecoverySet.m
		securityd/SecDbBackupManager.m
		securityd/SecDbItem.c
		securityd/SecDbKeychainItem.m
		securityd/SecDbKeychainItemV7.m
		securityd/SecDbKeychainMetadataKeyStore.m
		securityd/SecDbKeychainV7-protobufs/generated_source/SecDbKeychainSerializedAKSWrappedKey.m
		securityd/SecDbKeychainV7-protobufs/generated_source/SecDbKeychainSerializedItemV7.m
		securityd/SecDbKeychainV7-protobufs/generated_source/SecDbKeychainSerializedMetadata.m
		securityd/SecDbKeychainV7-protobufs/generated_source/SecDbKeychainSerializedSecretData.m
		securityd/SecDbQuery.c
		securityd/SecItemBackupServer.c
		securityd/SecItemDataSource.c
		securityd/SecItemDb.c
		securityd/SecItemSchema.c
		securityd/SecItemServer.c
		securityd/SecKeybagSupport.c
		securityd/SecLogSettingsServer.m
		securityd/SecOTRRemote.m
		securityd/SFKeychainControlManager.m
		securityd/SFKeychainServer.m
		#TrustedPeersHelper/TrustedPeersHelperProtocol.m
	DEFINITIONS
		USE_KEYSTORE=1
)
